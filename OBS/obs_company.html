
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OBS | Company Details</title>
  <link rel="stylesheet" href="css/style.css">
  <style>.company-wrap{max-width:640px; margin:40px auto}</style>
</head>
<body>
<header class="appbar">
  <h1>Company / Shop Details</h1>
  <nav class="appnav"><a href="obs_dashboard.html">Back</a></nav>
</header>
<div class="main">
  <div class="company-wrap card">
    <form id="companyForm" onsubmit="return false;">
      <div class="grid grid-2">
        <div><label>Company / Shop Name</label><input type="text" id="companyName" required></div>
        <div><label>PAN Number</label><input type="text" id="panNumber" required></div>
      </div>
      <div class="grid grid-2">
        <div><label>Address</label><input type="text" id="companyAddress" required></div>
        <div><label>Contact Number</label><input type="text" id="companyContact" required></div>
      </div>
      <div class="grid grid-2">
        <div><label>Email</label><input type="email" id="companyEmail"></div>
        <div><label>Website</label><input type="url" id="companyWebsite"></div>
      </div>
      <div style="margin-top:14px; display:flex; gap:10px">
        <button onclick="saveCompany()">Save Details</button>
        <button class="ghost" onclick="previewBillHeader()">Preview On Bill</button>
      </div>
      <p class="notice" style="margin-top:10px">Saved locally. These details appear at the top of every printed bill.</p>
    </form>
  </div>
  <div class="card">
    <h3>Bill Header Preview</h3>
    <div id="billHeaderPreview" class="notice">No data saved yet.</div>
  </div>
</div>
<footer class="site">© 2025 Online Billing System · Crafted UI</footer>
<script>
  function saveCompany(){
    const company={
      name: document.getElementById('companyName').value.trim(),
      pan: document.getElementById('panNumber').value.trim(),
      address: document.getElementById('companyAddress').value.trim(),
      contact: document.getElementById('companyContact').value.trim(),
      email: document.getElementById('companyEmail').value.trim(),
      website: document.getElementById('companyWebsite').value.trim()
    };
    localStorage.setItem('obs_company', JSON.stringify(company));
    alert('Company details saved. They will appear on every bill.');
    previewBillHeader();
  }
  function loadCompany(){ return JSON.parse(localStorage.getItem('obs_company')||'{}'); }
  function previewBillHeader(){
    const c = loadCompany();
    const html = `
      <div id="printBill">
        <h2>${c.name||'Your Company'}</h2>
        <div class="muted">${c.address||''} • PAN: ${c.pan||''} • ${c.contact||''} ${c.email?('• '+c.email):''} ${c.website?('• '+c.website):''}</div>
        <div class="meta"><div><b>Buyer:</b> John Doe<br><span class="muted">Sample Address</span></div><div><b>Txn ID:</b> TXN-000000<br><b>Date:</b> sample</div></div>
        <table><thead><tr><th>Item</th><th>Rate</th><th>Qty</th><th>Amount</th></tr></thead>
        <tbody><tr><td>Sample</td><td>100.00</td><td>1</td><td>100.00</td></tr></tbody>
        <tfoot><tr><td colspan="3">Grand Total</td><td>100.00</td></tr></tfoot></table>
        <div class="bottom-right">Printed by: sample</div>
      </div>
    `;
    document.getElementById('billHeaderPreview').innerHTML = html;
  }
  window.addEventListener('load', ()=>{
    const data=loadCompany();
    if(data.name) document.getElementById('companyName').value=data.name;
    if(data.pan) document.getElementById('panNumber').value=data.pan;
    if(data.address) document.getElementById('companyAddress').value=data.address;
    if(data.contact) document.getElementById('companyContact').value=data.contact;
    if(data.email) document.getElementById('companyEmail').value=data.email;
    if(data.website) document.getElementById('companyWebsite').value=data.website;
    previewBillHeader();
  });
</script>
</body>
</html>
