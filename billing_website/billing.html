<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Online Billing System</title>
<link rel="stylesheet" href="styles.css" />
<style>
/* App-specific styles */
.app-wrap{max-width:1200px;margin:24px auto;background:rgba(255,255,255,0.98);padding:18px;border-radius:10px;box-shadow:0 6px 24px rgba(0,0,0,0.08)}
.grid{display:grid;grid-template-columns:1fr 420px;gap:18px}
.section{background:#fff;padding:12px;border-radius:8px;box-shadow:0 4px 12px rgba(12,12,30,0.04)}
h2{margin:6px 0 12px 0}
input,select,textarea,button{font-size:14px;padding:8px;border-radius:6px;border:1px solid #ddd}
.controls{display:flex;gap:8px;flex-wrap:wrap}
.small{font-size:13px;padding:6px 8px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:8px;border-bottom:1px solid #f0f0f0;text-align:left}
.right{text-align:right}
.actions{display:flex;gap:6px}
.badge{background:#eef; padding:4px 8px;border-radius:6px;font-weight:700}
#stock-list{max-height:240px;overflow:auto}
#cart-list{max-height:260px;overflow:auto}
.footer-note{font-size:13px;margin-top:12px;color:#666}
.top-actions{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin-bottom:8px}
.search-input{flex:1}
.print-area{display:none}
/* print size: 1/3 A4 -> 210mm x 99mm */
@media print {
  body *{visibility:hidden}
  .print-area, .print-area *{visibility:visible}
  @page { size: 210mm 99mm; margin: 5mm; }
  .print-area{position:fixed;left:0;top:0;width:100%}
}
</style>
</head>
<body>
  <div class="app-wrap">
    <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <h1>Online Billing System</h1>
      <div>
        <span id="current-user" class="badge">Guest</span>
        <button id="btn-login" class="small">Login / Register</button>
        <button id="btn-shop" class="small">Shop Details</button>
      </div>
    </header>

    <div class="grid">
      <div class="section">
        <div class="top-actions">
          <input id="search-tx" class="search-input small" placeholder="Search transaction id or buyer name">
          <button id="btn-search" class="small">Search</button>
          <button id="btn-new" class="small">New Bill</button>
          <button id="btn-view-trans" class="small">View Transactions</button>
        </div>

        <div id="billing-area">
          <h2>Create Bill</h2>
          <div style="display:flex;gap:10px;align-items:center">
            <div style="flex:1">
              <label>Customer name</label><br>
              <input id="buyer-name" placeholder="Full name">
            </div>
            <div style="flex:1">
              <label>Customer address</label><br>
              <input id="buyer-address" placeholder="Address">
            </div>
          </div>

          <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
            <select id="select-stock" style="flex:1">
              <option value="">-- select item --</option>
            </select>
            <input id="item-qty" type="number" min="1" value="1" style="width:90px">
            <button id="btn-add-item" class="small">Add</button>
            <button id="btn-clear-cart" class="small">Clear</button>
          </div>

          <div id="cart-list" style="margin-top:12px">
            <table class="table" id="cart-table">
              <thead><tr><th>Item</th><th>Rate</th><th>Qty</th><th>Amount</th><th></th></tr></thead>
              <tbody></tbody>
            </table>
          </div>

          <div style="display:flex;gap:12px;margin-top:12px;align-items:center;">
            <div style="flex:1">
              <label>VAT (%)</label><br><input id="vat-percent" type="number" min="0" value="13">
            </div>
            <div style="flex:1">
              <label>Discount (%)</label><br><input id="discount-percent" type="number" min="0" value="0">
            </div>
            <div style="flex:1">
              <label>Payment method</label><br>
              <select id="payment-method">
                <option value="cash">Cash</option>
                <option value="online">Online Payment</option>
              </select>
            </div>
          </div>

          <div id="online-qr" style="margin-top:10px;display:none">
            <img src="images/qr.jpg" alt="QR" style="max-width:160px;border:1px solid #eee">
            <div class="footer-note">Show this QR to customer for online payment.</div>
          </div>

          <div style="margin-top:12px;display:flex;gap:12px;align-items:center;">
            <div style="flex:1">
              <label>Total Amount</label><br><input id="total-amount" readonly>
            </div>
            <div style="flex:1">
              <label>Amount given by customer</label><br><input id="amount-given" placeholder="0">
            </div>
            <div style="flex:1">
              <label>Amount to be returned</label><br><input id="amount-returned" readonly>
            </div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
            <button id="btn-save-bill" class="small">Save & Print Bill</button>
            <button id="btn-save" class="small">Save (No Print)</button>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Stock Management</h2>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="stock-name" placeholder="Item name"><br>
        </div><br>
        <div style="display:flex;gap:8px;align-items:center">
        <input id="stock-rate" placeholder="Rate" type="number" min="0"><br>
        </div><br>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="stock-qty" placeholder="Qty" type="number" min="0"><br>
        </div><br>
         <button id="btn-add-stock" class="small">Add / Update</button>
        <div id="stock-list" style="margin-top:12px">
          <table class="table" id="stock-table">
            <thead><tr><th>Item</th><th>Rate</th><th>Qty</th><th></th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <hr>
        <h3>Transactions</h3>
        <div id="transactions-list" style="max-height:220px;overflow:auto"></div>
      </div>
    </div>

    <div class="footer-note">
      Link: Services: <a href="index.html">Online Billing System</a>
      <div style="margin-top:6px">&copy; 2025 Your Company. All rights reserved.</div>
    </div>
  </div>

<!-- Login / Register Modal -->
<div id="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.4);align-items:center;justify-content:center">
  <div style="background:#fff;padding:16px;border-radius:10px;min-width:320px;max-width:420px">
    <h3 id="modal-title">Login</h3>
    <div id="login-form">
      <label>Username</label><br><input id="login-user"><br>
      <label>Password</label><br><input id="login-pass" type="password"><br><br>
      <button id="btn-do-login" class="small">Login</button>
      <button id="btn-show-register" class="small">Register</button>
      <button id="btn-modal-close" class="small">Close</button>
    </div>
    <div id="register-form" style="display:none">
      <label>Username</label><br><input id="reg-user"><br>
      <label>Display name</label><br><input id="reg-name"><br>
      <label>Password</label><br><input id="reg-pass" type="password"><br>
      <button id="btn-do-register" class="small">Create account</button>
      <button id="btn-show-login" class="small">Back to Login</button>
    </div>
  </div>
</div>

<!-- Shop Details Modal -->
<div id="modal-shop" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.4);align-items:center;justify-content:center">
  <div style="background:#fff;padding:16px;border-radius:10px;min-width:360px;max-width:520px">
    <h3>Shop / Company Details</h3>
    <label>Company / Shop name</label><br><input id="shop-name"><br>
    <label>Address</label><br><input id="shop-address"><br>
    <label>PAN / Tax number</label><br><input id="shop-pan"><br>
    <label>Phone</label><br><input id="shop-phone"><br><br>
    <button id="btn-save-shop" class="small">Save</button>
    <button id="btn-close-shop" class="small">Close</button>
  </div>
</div>

<!-- Hidden print area -->
<div id="print-area" class="print-area" style="display:none">
  <div id="print-bill" style="font-family:monospace;background:#fff;padding:10px;border:1px solid #ddd">
    <!-- bill content injected here -->
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
